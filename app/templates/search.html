{% extends "base.html" %}

{% block content %}
<div class="container">
    <!-- Search Section -->
    <div class="search-section">
        <h2 class="search-title">Find Your Game</h2>
        <p class="search-subtitle">Search through our collection of Nintendo Switch games</p>
        
        <div class="search-box">
            <input 
                type="text" 
                id="search-input" 
                class="search-input" 
                placeholder="Type game name to search..."
                autocomplete="off"
            >
        </div>
    </div>

    <!-- Results Section -->
    <div class="results-section">
        <div class="results-header">
            <h3>Results</h3>
            <div class="results-controls">
                <label for="sort-select" class="sort-label">Sort by:</label>
                <select id="sort-select" class="sort-select">
                    <option value="name">Name (A-Z)</option>
                    <option value="recent">Most Recently Uploaded</option>
                    <option value="downloads" selected>Most Downloads</option>
                    <option value="size">Biggest to Smallest</option>
                </select>
                <div id="hash-count" class="hash-count">Loading...</div>
                <div id="results-count" class="results-count">Loading...</div>
            </div>
        </div>

        <!-- Loading State -->
        <div id="loading-state" class="loading">
            Loading entries
        </div>

        <!-- Results Grid -->
        <div id="results-grid" class="results-grid hidden">
            <!-- Results will be dynamically inserted here -->
        </div>

        <!-- Empty State -->
        <div id="empty-state" class="empty-state hidden">
            <div class="empty-state-icon">üîç</div>
            <div class="empty-state-title">No Results Found</div>
            <div class="empty-state-message">Try adjusting your search terms</div>
        </div>
    </div>
</div>

<script>
// Pass user role information to JavaScript
window.userRole = {
    isModerator: {{ 'true' if is_moderator else 'false' }},
    isAdmin: {{ 'true' if request.session.get('is_admin', False) else 'false' }}
};
</script>

<script src="{{ url_for('static', path='js/search.js') }}"></script>
{% endblock %}
